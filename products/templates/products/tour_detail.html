{% extends "base.html" %}
{% load static %}

{% block content %}

<div class="container-fluid m-0 p-0">
    <div class="row mt-5 mx-0">
        <div class="col-12 mt-4 pt-3 pt-lg-2 px-0">
            <div class="row price-md mx-0 px-0">
                <div class="col col-md-6">
                    <div class="row">
                        <div class="col px-3">Rating</div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <h1>{{ tour.friendly_name }}</h1>
                        </div>
                    </div>
                </div>
                <div class="d-none d-md-flex col-md-3 align-items-center justify-content-end px-0">From
                    <strong>${{ tour.price }}</strong></div>
                <div class="d-none d-md-flex col-md-3 align-items-center text-center justify-content-center px-0">
                    <a class="btn tour-btn" href="#dates" onclick="openTab(event, 'dates')">View Dates</a>
                </div>
            </div>
            <div class="tab px-0 mx-0 row">
                <div class="col-4">
                    <button class="tablinks" onclick="openTab(event, 'the-trip')" id="defaultOpen">The Trip</button>
                </div>
                <div class="col-4">
                    <button class="tablinks" onclick="openTab(event, 'dates')">Dates</button>
                </div>
                <!-- <button class="tablinks" onclick="openTab(event, 'Tokyo')">Reviews</button> -->
            </div>
            <div class="row mx-0 px-0">
                <div id="the-trip" class="tabcontent mx-0 px-0 col-12">
                    <div class="row mt-2 mx-0 px-0">
                        <div class="col col-lg-5">
                            {% if tour.image %}
                            <img class="tour-detail-img" src="/media/{{ tour.image }}" alt="{{ tour.name }}">
                            {% else %}
                            <img class="tour-detail-img" src="/media/noimage.png" alt="placeholder image">
                            {% endif %}
                        </div>
                        <div class="col-lg-6 d-none d-lg-block">
                            <div class="row my-2">
                                <div class="col">
                                    <h3>{{ tour.description }}</h3>
                                </div>
                            </div>
                            <div class="row">
                                {% if tour.accomodation %}
                                <div class="col-6">
                                    <h5><i class="fa-solid fa-bed"></i> Accomodation</h5>
                                    <p>{{ tour.accomodation }} nights in Hotels</p>
                                </div>
                                {% endif %}
                                {% if tour.num_of_dinner or tour.num_of_breakfast %}
                                <div class="col-6">
                                    <h5><i class="fa-solid fa-utensils"></i> Meals</h5>
                                    {% if tour.num_of_breakfast %}<p>{{ tour.num_of_breakfast}} breakfasts</p>
                                    {% endif %}
                                    {% if tour.num_of_dinner %}<p>{{ tour.num_of_dinner}} dinners</p>{% endif %}
                                </div>
                                {% endif %}
                            </div>
                            <div class="row">
                                <div class="col-6">
                                    <h5><i class="fa-solid fa-bus-simple"></i> Transport</h5>
                                    <p>{{ tour.transport }}</p>
                                </div>
                                <div class="col-6">
                                    <h5><i class="fa-solid fa-people-group"></i> Max Group Size</h5>
                                    <p>{{ tour.max_num_of_guests }} people</p>
                                </div>
                            </div>
                            {% if tour.group_discount %}
                            <div class="row">
                                <div class="col">
                                    <h5>Group discount available!</h5>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="row my-2 d-lg-none mx-0 px-0">
                        <div class="col">
                            <h3>{{ tour.description }}</h3>
                        </div>
                    </div>
                    <div class="row my-2 mx-0 px-0">
                        <div class="col">
                            <p>{{ tour.itinerary }}</p>
                        </div>
                    </div>
                    {% if group_discount %}
                    <div class="row d-lg-none">
                        <div class="col">
                            <p>Group discount available!</p>
                        </div>
                    </div>
                    {% endif %}
                    <div class="row d-lg-none w-100 mx-0 px-0">
                        {% if tour.accomodation %}
                        <div class="col-6">
                            <h5><i class="fa-solid fa-bed"></i> Accomodation</h5>
                            <p>{{ tour.accomodation }} nights in Hotels</p>
                        </div>
                        {% endif %}
                        {% if tour.num_of_dinner or tour.num_of_breakfast %}
                        <div class="col-6">
                            <h5><i class="fa-solid fa-utensils"></i> Meals</h5>
                            {% if tour.num_of_breakfast %}<p>{{ tour.num_of_breakfast}} breakfasts</p>{% endif %}
                            {% if tour.num_of_dinner %}<p>{{ tour.num_of_dinner}} dinners</p>{% endif %}
                        </div>
                        {% endif %}
                    </div>
                    <div class="row d-lg-none w-100 mx-0 px-0">
                        <div class="col-6">
                            <h5><i class="fa-solid fa-bus-simple"></i> Transport</h5>
                            <p>{{ tour.transport }}</p>
                        </div>
                        <div class="col-6">
                            <h5><i class="fa-solid fa-people-group"></i> Max Group Size</h5>
                            <p>{{ tour.max_num_of_guests }} people</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mx-0 px-0">
                <div id="dates" class="tabcontent col-12">
                    <div class="tab row px-0 mx-0 align-items-center justify-content-center text-center">
                        <button class="yearlinks col-2 px-auto" onclick="openYear(event, '2023')">2023</button>
                        <button class="yearlinks col-2 px-auto" onclick="openYear(event, '2024')">2024</button>
                    </div>
                    <div id="2023" class="yearcontent">
                        {% for month in tour.dates.all %}
                        <div class="tab row px-0 mx-0 align-items-center justify-content-center text-center col-2">
                            <button class="monthlinks col-2 px-auto"
                                onclick="openMonth(event, '{{ month.name }}')">{{ month.name }}</button>

                        </div>
                        <div id="{{ month.name }}" class="monthcontent">{{ month.name }} dates</div>
                        {% endfor %}
                    </div>
                    <div id="2024" class="yearcontent">
                        {% for month in tour.dates.all %}

                        <div class="tab row px-0 mx-0 align-items-center justify-content-center text-center">
                            <button class="monthlinks col-2 px-auto"
                                onclick="openMonth(event, '{{ month.name }}')">{{ month.name }}</button>

                        </div>
                        <div id="{{ month.name }}" class="monthcontent">{{ month.name }} dates</div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row py-5 px-0 mx-0">
        <div class="col"></div>
    </div>
    <div class="row fixed-bottom tour-footer p-2 align-items-center text-center d-md-none">
        <div class="col-6">From <strong>${{ tour.price }}</strong></div>
        <div class="col-6">
            <a class="btn tour-btn" href="#">View Dates</a>
        </div>
    </div>
</div>

{% endblock %}

{% block postload_js %}
<script src="../../../static/js/tour_tabs.js" type="text/javascript"></script>
{% endblock %}